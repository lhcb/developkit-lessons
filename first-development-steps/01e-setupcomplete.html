
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Pure git Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="The Starterkit team and contributors">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-panels/panels.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-katex-auto-render/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-term/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="01f-building.html" />
    
    
    <link rel="prev" href="01d-setupsimple.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    The LHCb Starterkit
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="../CONTRIBUTING.html">
            
                <a href="../CONTRIBUTING.html">
            
                    
                    Contributing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" >
            
                <a target="_blank" href="https://lhcb.github.io/starterkit-lessons/first-analysis-steps/">
            
                    
                    First analysis steps
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="3.1" >
            
                <a target="_blank" href="https://lhcb.github.io/starterkit-lessons/second-analysis-steps/">
            
                    
                    Second analysis steps
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="./">
            
                <a href="./">
            
                    
                    First development steps
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="01-intro.html">
            
                <a href="01-intro.html">
            
                    
                    Setting up a development environment
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1.1" data-path="01a-cernvm.html">
            
                <a href="01a-cernvm.html">
            
                    
                    Setting up a CernVM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.1.2" data-path="01b-docker.html">
            
                <a href="01b-docker.html">
            
                    
                    Setting up with Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.1.3" data-path="01c-centos.html">
            
                <a href="01c-centos.html">
            
                    
                    Setting up CentOS 7
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="01-git.html">
            
                <a href="01-git.html">
            
                    
                    Git for LHCb
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.2.1" data-path="01d-setupsimple.html">
            
                <a href="01d-setupsimple.html">
            
                    
                    LB git
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="4.1.2.2" data-path="01e-setupcomplete.html">
            
                <a href="01e-setupcomplete.html">
            
                    
                    Pure git
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="01f-building.html">
            
                <a href="01f-building.html">
            
                    
                    Building LHCb software
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.4" data-path="01g-testing.html">
            
                <a href="01g-testing.html">
            
                    
                    Testing and examples in LHCb
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.5" data-path="02a-gaudi-helloworld.html">
            
                <a href="02a-gaudi-helloworld.html">
            
                    
                    Hello World in the Gaudi Framework
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.6" data-path="02b-gaudi-intro.html">
            
                <a href="02b-gaudi-intro.html">
            
                    
                    Intro to the Gaudi Framework
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.7" data-path="03a-gaudi.html">
            
                <a href="03a-gaudi.html">
            
                    
                    The Gaudi Framework
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.8" data-path="03b-upgrading.html">
            
                <a href="03b-upgrading.html">
            
                    
                    Upgrading algorithms
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.9" data-path="05-cpp.html">
            
                <a href="05-cpp.html">
            
                    
                    What's new in C++
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.9.1" data-path="05a-cpp11.html">
            
                <a href="05a-cpp11.html">
            
                    
                    What's new in C++11
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.9.2" data-path="05b-cpp14.html">
            
                <a href="05b-cpp14.html">
            
                    
                    What's new in C++14
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.9.3" data-path="05c-cpp17.html">
            
                <a href="05c-cpp17.html">
            
                    
                    What's new in C++17
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.9.4" data-path="05d-cppfuture.html">
            
                <a href="05d-cppfuture.html">
            
                    
                    Prospects in C++'s future
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.1.10" data-path="06a-perf.html">
            
                <a href="06a-perf.html">
            
                    
                    C++ performance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.11" data-path="06b-python.html">
            
                <a href="06b-python.html">
            
                    
                    Python in the upgrade era
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="5.1" >
            
                <a target="_blank" href="ref://developkit-lessons.pdf">
            
                    
                    Download PDF
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Pure git</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="setup-complete">Setup Complete</h1>
<p><div class="panel panel-warning"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(2368733432);" id="setting-up-using-pure-git"><i class="fa fa-line-chart"></i> Setting up using pure git<span id="heading-2368733432"></span></h3></div><div class="panel-body" id="panel-2368733432"><ul>
<li>Set up a development environment.</li>
</ul>
</div></div></p>
<p><div class="panel panel-warning"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(4679354825);" id="prerequisites-for-building-lhcb-software"><i class="fa fa-rocket"></i> Prerequisites for building LHCb software<span id="heading-4679354825"></span></h3></div><div class="panel-body" id="panel-4679354825"><p>You should have a valid LHCb environment, using one of the ways previously mentioned.
You may need to run <code>source /cvmfs/lhcb.cern.ch/group_login.sh</code> to set up your environment variables.</p>
</div></div></p>
<p>Before building, there are a few recommended customisations to prepare in your environment, besides those discussed in the previous lesson.</p>
<p><div class="panel panel-success"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(9060500039);" id="ninja-optional-faster-replacement-for-makeclick-to-expand"><i class="fa fa-bell"></i> Ninja (optional, faster replacement for make)<span id="heading-9060500039">Click to expand</span></h3></div><div class="panel-body" style="display: none" id="panel-9060500039"><p>If you have ninja in your path, it will be used to (marginally) speed up the make process, and it is automatic; you still use <code>make ...</code> commands. To add it:</p>
<pre><code class="lang-term"><pre class="term t-default t-fade"><button class="btn t-copy" data-clipboard-text="export PATH=/cvmfs/lhcb.cern.ch/lib/contrib/ninja/1.4.0/x86_64-slc6:$PATH"><svg class="octicon octicon-clippy" viewbox="0 0 14 16" version="1.1" width="14" height="14" aria-hidden="true"><path fill-rule="evenodd" d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"/></svg></button><span class="t-line t-prompt-line"><span class="t-prompt">local</span><span class="t-pathsep">:</span><span class="t-path">~ </span><span class="t-delimiter">$ </span><span class="t-command">export PATH=/cvmfs/lhcb.cern.ch/lib/contrib/ninja/1.4.0/x86_64-slc6:$PATH</span>
</span></pre></code></pre>
<p>You can also add:</p>
<pre><code class="lang-term"><pre class="term t-default t-fade"><button class="btn t-copy" data-clipboard-text="export VERBOSE="><svg class="octicon octicon-clippy" viewbox="0 0 14 16" version="1.1" width="14" height="14" aria-hidden="true"><path fill-rule="evenodd" d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"/></svg></button><span class="t-line t-prompt-line"><span class="t-prompt">local</span><span class="t-pathsep">:</span><span class="t-path">~ </span><span class="t-delimiter">$ </span><span class="t-command">export VERBOSE=</span>
</span></pre></code></pre>
<p>if you are a fan of reduced noise when building.</p>
</div></div></p>
<p><div class="panel panel-success"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(7067331396);" id="ccache-optional-faster-rebuildsclick-to-expand"><i class="fa fa-bell"></i> CCache (optional, faster rebuilds)<span id="heading-7067331396">Click to expand</span></h3></div><div class="panel-body" style="display: none" id="panel-7067331396"><p>If you rebuild often, you should be using CCache. This program stores the results of compiling and reuses them if nothing changes. You should be able to do something like this after you install CCache:</p>
<pre><code class="lang-term"><pre class="term t-default t-fade"><button class="btn t-copy" data-clipboard-text="export CCACHE_DIR=$HOME/.ccache
export CMAKEFLAGS=-DCMAKE_USE_CCACHE=ON"><svg class="octicon octicon-clippy" viewbox="0 0 14 16" version="1.1" width="14" height="14" aria-hidden="true"><path fill-rule="evenodd" d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"/></svg></button><span class="t-line t-prompt-line"><span class="t-prompt">local</span><span class="t-pathsep">:</span><span class="t-path">~ </span><span class="t-delimiter">$ </span><span class="t-command">export CCACHE_DIR=$HOME/.ccache</span>
</span><span class="t-line t-prompt-line"><span class="t-prompt">local</span><span class="t-pathsep">:</span><span class="t-path">~ </span><span class="t-delimiter">$ </span><span class="t-command">export CMAKEFLAGS=-DCMAKE_USE_CCACHE=ON</span>
</span></pre></code></pre>
<p>If you installed CCache from source locally to <code>$HOME/.local</code>, then you&apos;ll need the local bin in your path, too:</p>
<pre><code class="lang-bash"><span class="hljs-built_in">local</span>:~ $ <span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$HOME</span>/.local/bin:<span class="hljs-variable">$PATH</span>
</code></pre>
</div></div></p>
<p><div class="panel panel-success"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(5304917947);" id="debug-buildsclick-to-expand"><i class="fa fa-bell"></i> Debug builds<span id="heading-5304917947">Click to expand</span></h3></div><div class="panel-body" style="display: none" id="panel-5304917947"><p>If you want a debug build, you&apos;ll need to change some environment variables with the LbLogin program, which will start a new bash instance with the required variables using the configuration name in <code>$CMTDEB</code>:</p>
<pre><code class="lang-term"><pre class="term t-default t-fade"><button class="btn t-copy" data-clipboard-text="LbLogin -c $CMTDEB"><svg class="octicon octicon-clippy" viewbox="0 0 14 16" version="1.1" width="14" height="14" aria-hidden="true"><path fill-rule="evenodd" d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"/></svg></button><span class="t-line t-prompt-line"><span class="t-prompt">local</span><span class="t-pathsep">:</span><span class="t-path">~ </span><span class="t-delimiter">$ </span><span class="t-command">LbLogin -c $CMTDEB</span>
</span></pre></code></pre>
</div></div></p>
<h3 id="path">Path</h3>
<p>You should have a main development directory, and it should be in your CMTPROJECTPATH variable. If you use <code>$HOME/lhcbdev</code>, then you would do:</p>
<pre><code class="lang-term"><pre class="term t-default t-fade"><button class="btn t-copy" data-clipboard-text="export CMTPROJECTPATH=$HOME/lhcbdev:$CMTPROJECTPATH"><svg class="octicon octicon-clippy" viewbox="0 0 14 16" version="1.1" width="14" height="14" aria-hidden="true"><path fill-rule="evenodd" d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"/></svg></button><span class="t-line t-prompt-line"><span class="t-prompt">local</span><span class="t-pathsep">:</span><span class="t-path">~ </span><span class="t-delimiter">$ </span><span class="t-command">export CMTPROJECTPATH=$HOME/lhcbdev:$CMTPROJECTPATH</span>
</span></pre></code></pre>
<p>In VMs and Docker, sometimes the root directory <code>/workspace</code> is used.</p>
<h1 id="git-for-lhcb">Git for LHCb</h1>
<p>You can set up a development environment with complete LHCb packages, and build them from scratch. This allows you to make large scale changes without locating sub-packages online, and is similar to the standard procedures in other projects. The downside to this is that they take a while to compile, due to the size of LHCb projects. Since the following is very similar to standard git procedures, most online git tutorials are also helpful in understanding the meaning of the various
git command used.</p>
<p><div class="panel panel-success"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(2988718126);" id="help-for-the-git-noviceclick-to-expand"><i class="fa fa-bell"></i> Help for the git novice<span id="heading-2988718126">Click to expand</span></h3></div><div class="panel-body" style="display: none" id="panel-2988718126"><p>There are a lot of sites available for help with vanilla git commands. A few are listed here.</p>
<ol>
<li><a href="https://git-scm.com/docs/gittutorial" target="_blank">The git documentation</a>. </li>
<li><a href="https://try.github.io/levels/1/challenges/1" target="_blank">Github&apos;s interactive tutorial series</a>. This is an excellent resource for running simple commands to get a feel for how git works on the command line, right in your browser.</li>
<li><a href="https://www.atlassian.com/git/tutorials/" target="_blank">Atlassian&apos;s git guru tutorials</a>.</li>
<li><a href="http://www.tutorialspoint.com/git/" target="_blank">TutorialsPoint&apos;s git tutorials</a>.</li>
</ol>
<p>There are always cheatsheets, too, such as <a href="http://www.cheat-sheets.org/saved-copy/git-cheat-sheet.pdf" target="_blank">this one</a>. A unique cheatsheet reference from one of the LHCb collaborators can also be <a href="files/HowGitWorks20b.pdf">downloaded here</a>.</p>
</div></div></p>
<p>Before using git, you should go to your gitlab.cern.ch account and set up an ssh key. The procedure is the same as with github (and the public key is the same). In short, on Linux or Mac, make sure you have key pair in <code>~/.ssh/id_rsa.pub</code> and <code>~/.ssh/id_rsa</code>. If you don&apos;t have one, run</p>
<pre><code class="lang-term"><pre class="term t-default t-fade"><button class="btn t-copy" data-clipboard-text="ssh-keygen"><svg class="octicon octicon-clippy" viewbox="0 0 14 16" version="1.1" width="14" height="14" aria-hidden="true"><path fill-rule="evenodd" d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"/></svg></button><span class="t-line t-prompt-line"><span class="t-prompt">local</span><span class="t-pathsep">:</span><span class="t-path">~ </span><span class="t-delimiter">$ </span><span class="t-command">ssh-keygen</span>
</span></pre></code></pre>
<p>and use the default location. If you don&apos;t put in a passphrase, you can directly push and pull without a password; if you do put a passphrase, you can run</p>
<pre><code class="lang-term"><pre class="term t-default t-fade"><button class="btn t-copy" data-clipboard-text="ssh-add"><svg class="octicon octicon-clippy" viewbox="0 0 14 16" version="1.1" width="14" height="14" aria-hidden="true"><path fill-rule="evenodd" d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"/></svg></button><span class="t-line t-prompt-line"><span class="t-prompt">local</span><span class="t-pathsep">:</span><span class="t-path">~ </span><span class="t-delimiter">$ </span><span class="t-command">ssh-add</span>
</span></pre></code></pre>
<p>when you start a terminal to enter your passphrase once per session. Your computer keychain (Mac, Ubuntu, etc) can also store your password once per login.</p>
<p><div class="panel panel-success"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(684426232);" id="if-you-encounter-problemsclick-to-expand"><i class="fa fa-bell"></i> If you encounter problems<span id="heading-684426232">Click to expand</span></h3></div><div class="panel-body" style="display: none" id="panel-684426232"><p>If you get an error about your ssh agent not running, you can execute the output of the ssh-agent command with <code>eval $(ssh-agent)</code> and try again.</p>
</div></div></p>
<p>Once you verify you have an ssh key pair, you need to go to the gitlab website, go to your profile (possibly hidden behind the hamburger button), then edit, then SSH Keys <a href="https://gitlab.cern.ch/profile/keys" target="_blank">(or just go here)</a>, and paste the contents of the <code>id_rsa.pub</code> file into the key edit box. You can give it a title that allows you to identify the computer or VM associated with the key.</p>
<h2 id="setting-up-the-projects">Setting up the projects</h2>
<p>To get a complete project for development, the following command will work:</p>
<pre><code class="lang-term"><pre class="term t-default t-fade"><button class="btn t-copy" data-clipboard-text="git clone ssh://git@gitlab.cern.ch:7999/lhcb/Project.git"><svg class="octicon octicon-clippy" viewbox="0 0 14 16" version="1.1" width="14" height="14" aria-hidden="true"><path fill-rule="evenodd" d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"/></svg></button><span class="t-line t-prompt-line"><span class="t-prompt">local</span><span class="t-pathsep">:</span><span class="t-path">~ </span><span class="t-delimiter">$ </span><span class="t-command">git clone ssh://git@gitlab.cern.ch:7999/lhcb/Project.git</span>
</span></pre></code></pre>
<p>where <code>Project</code> is the name of the project. The location of this project on your computer is important! It should have the following structure:</p>
<ul>
<li>Main LHCb folder (any name, like <code>$HOME/lhcbdev</code>)<ul>
<li><code>Project</code> (git folder here)</li>
<li><code>AnotherProject</code></li>
</ul>
</li>
</ul>
<p>The package structure is this way to allow the package search system to find names and versions. The main folder should be listed in the <code>$CMTPROJECTPATH</code> environment variable.</p>
<p>Once you have cloned the repository, you should check out the branch that you want to build/work on with <code>git checkout -b BranchName</code>.</p>
<p>An complete example for the Lbcom package would look like this, using a destination for the git folder, since it will default to the wrong name:</p>
<pre><code class="lang-term"><pre class="term t-default t-fade"><button class="btn t-copy" data-clipboard-text="mkdir ~/lhcbdev
cd ~/lhcbdev
git clone ssh://git@gitlab.cern.ch:7999/lhcb/LHCb.git
cd LHCb
git checkout -b upgradeTracking"><svg class="octicon octicon-clippy" viewbox="0 0 14 16" version="1.1" width="14" height="14" aria-hidden="true"><path fill-rule="evenodd" d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"/></svg></button><span class="t-line t-prompt-line"><span class="t-prompt">local</span><span class="t-pathsep">:</span><span class="t-path">~ </span><span class="t-delimiter">$ </span><span class="t-command">mkdir ~/lhcbdev</span>
</span><span class="t-line t-prompt-line"><span class="t-prompt">local</span><span class="t-pathsep">:</span><span class="t-path">~ </span><span class="t-delimiter">$ </span><span class="t-command">cd ~/lhcbdev</span>
</span><span class="t-line t-prompt-line"><span class="t-prompt">local</span><span class="t-pathsep">:</span><span class="t-path">lhcbdev </span><span class="t-delimiter">$ </span><span class="t-command">git clone ssh://git@gitlab.cern.ch:7999/lhcb/LHCb.git</span>
</span><span class="t-line t-prompt-line"><span class="t-prompt">local</span><span class="t-pathsep">:</span><span class="t-path">lhcbdev </span><span class="t-delimiter">$ </span><span class="t-command">cd LHCb</span>
</span><span class="t-line t-prompt-line"><span class="t-prompt">local</span><span class="t-pathsep">:</span><span class="t-path">LHCb </span><span class="t-delimiter">$ </span><span class="t-command">git checkout -b upgradeTracking</span>
</span></pre></code></pre>
<p>Inside the project, the CMakeLists.txt file may reference other projects, like this:</p>
<pre><code class="lang-cmake">gaudi_project(<span class="hljs-keyword">Project</span> LocalVersion
              USE ReferredToProject RemoteVersion
              DATA OtherStuff)
</code></pre>
<p>You need to set the LocalVersion to your version (such as upgradeTracking), and you need to set any dependencies to the version names you&apos;ve set, as well. When <code>gaudi_project</code> looks for a package, it will look for ones that follow the above naming scheme and have the correct, matching version.</p>
<blockquote>
<p>Note: You do not need to locally build all dependencies if there is a released version that will work; they will be found if you do not have a local version.</p>
</blockquote>
<h1 id="building">Building</h1>
<p>To build, you need to run the following commands in each package directory (starting with dependencies first):</p>
<pre><code class="lang-term"><pre class="term t-default t-fade"><button class="btn t-copy" data-clipboard-text="lb-project-init"><svg class="octicon octicon-clippy" viewbox="0 0 14 16" version="1.1" width="14" height="14" aria-hidden="true"><path fill-rule="evenodd" d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"/></svg></button><span class="t-line t-prompt-line"><span class="t-prompt">local</span><span class="t-pathsep">:</span><span class="t-path">LHCb </span><span class="t-delimiter">$ </span><span class="t-command">lb-project-init</span>
</span></pre></code></pre>
<p>This will setup the makefile, and some other things. Then run:</p>
<pre><code class="lang-term"><pre class="term t-default t-fade"><button class="btn t-copy" data-clipboard-text="make configure"><svg class="octicon octicon-clippy" viewbox="0 0 14 16" version="1.1" width="14" height="14" aria-hidden="true"><path fill-rule="evenodd" d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"/></svg></button><span class="t-line t-prompt-line"><span class="t-prompt">local</span><span class="t-pathsep">:</span><span class="t-path">LHCb </span><span class="t-delimiter">$ </span><span class="t-command">make configure</span>
</span></pre></code></pre>
<p>to configure the run (it runs CMake behind the scenes). If this fails, you probably have a problem in your CMakeLists.txt or with your paths.</p>
<p>To build and move the results to the folder that CMT expects, run:</p>
<pre><code class="lang-term"><pre class="term t-default t-fade"><button class="btn t-copy" data-clipboard-text="make install"><svg class="octicon octicon-clippy" viewbox="0 0 14 16" version="1.1" width="14" height="14" aria-hidden="true"><path fill-rule="evenodd" d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"/></svg></button><span class="t-line t-prompt-line"><span class="t-prompt">local</span><span class="t-pathsep">:</span><span class="t-path">LHCb </span><span class="t-delimiter">$ </span><span class="t-command">make install</span>
</span></pre></code></pre>
<p>This should take a long time the first time, and should be much faster after that.</p>
<p><div class="panel panel-success"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(7549413482);" id="future-reading"><i class="fa fa-key"></i> Future reading<span id="heading-7549413482"></span></h3></div><div class="panel-body" id="panel-7549413482"><p>The twiki page <a href="https://twiki.cern.ch/twiki/bin/view/LHCb/Git4LHCb" target="_blank">Git4LHCb</a> is currently the best source for git examples.</p>
</div></div></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="01d-setupsimple.html" class="navigation navigation-prev " aria-label="Previous page: LB git">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="01f-building.html" class="navigation navigation-next " aria-label="Next page: Building LHCb software">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Pure git","level":"4.1.2.2","depth":3,"next":{"title":"Building LHCb software","level":"4.1.3","depth":2,"path":"first-development-steps/01f-building.md","ref":"first-development-steps/01f-building.md","articles":[]},"previous":{"title":"LB git","level":"4.1.2.1","depth":3,"path":"first-development-steps/01d-setupsimple.md","ref":"first-development-steps/01d-setupsimple.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-sharing","panels@git+https://github.com/lhcb/gitbook-plugin-panels.git#master","katex-auto-render@git+https://github.com/lhcb/gitbook-plugin-katex-auto-render.git#master","collapsible-menu","otherlink","term"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"collapsible-menu":{},"search":{},"otherlink":{},"term":{"copyButtons":true,"fade":true,"lineStyles":true,"prompt":"(?<prompt>[^\\$^#^:]*)(?<pathsep>:?)(?<path>[^\\$^#]*?)(?<delimiter>[\\$#] )(?<command>.*)$","style":"default"},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"panels":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"katex-auto-render":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"The Starterkit team and contributors","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"first-development-steps/01e-setupcomplete.md","mtime":"2017-11-10T03:51:27.772Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-11-10T03:54:01.325Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-panels/panels.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-katex-auto-render/katex.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-katex-auto-render/auto-render.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-katex-auto-render/enable-auto-render.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-otherlink/js/otherlink.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-term/clipboard.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-term/initclip.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-term/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

