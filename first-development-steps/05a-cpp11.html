
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>What's new in C++11 Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="The Starterkit team and contributors">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-panels/panels.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-katex-auto-render/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-term/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="05b-cpp14.html" />
    
    
    <link rel="prev" href="05-cpp.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    The LHCb Starterkit
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="../CONTRIBUTING.html">
            
                <a href="../CONTRIBUTING.html">
            
                    
                    Contributing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" >
            
                <a target="_blank" href="https://lhcb.github.io/starterkit-lessons/first-analysis-steps/">
            
                    
                    First analysis steps
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="3.1" >
            
                <a target="_blank" href="https://lhcb.github.io/starterkit-lessons/second-analysis-steps/">
            
                    
                    Second analysis steps
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="./">
            
                <a href="./">
            
                    
                    First development steps
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="01-intro.html">
            
                <a href="01-intro.html">
            
                    
                    Setting up a development environment
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1.1" data-path="01a-cernvm.html">
            
                <a href="01a-cernvm.html">
            
                    
                    Setting up a CernVM
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.1.2" data-path="01b-docker.html">
            
                <a href="01b-docker.html">
            
                    
                    Setting up with Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.1.3" data-path="01c-centos.html">
            
                <a href="01c-centos.html">
            
                    
                    Setting up CentOS 7
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.1.2" data-path="01-git.html">
            
                <a href="01-git.html">
            
                    
                    Git for LHCb
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.2.1" data-path="01d-setupsimple.html">
            
                <a href="01d-setupsimple.html">
            
                    
                    LB git
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2.2" data-path="01e-setupcomplete.html">
            
                <a href="01e-setupcomplete.html">
            
                    
                    Pure git
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="01f-building.html">
            
                <a href="01f-building.html">
            
                    
                    Building LHCb software
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.4" data-path="01g-testing.html">
            
                <a href="01g-testing.html">
            
                    
                    Testing and examples in LHCb
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.5" data-path="02a-gaudi-helloworld.html">
            
                <a href="02a-gaudi-helloworld.html">
            
                    
                    Hello World in the Gaudi Framework
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.6" data-path="02b-gaudi-intro.html">
            
                <a href="02b-gaudi-intro.html">
            
                    
                    Intro to the Gaudi Framework
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.7" data-path="03a-gaudi.html">
            
                <a href="03a-gaudi.html">
            
                    
                    The Gaudi Framework
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.8" data-path="03b-upgrading.html">
            
                <a href="03b-upgrading.html">
            
                    
                    Upgrading algorithms
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.9" data-path="05-cpp.html">
            
                <a href="05-cpp.html">
            
                    
                    What's new in C++
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="4.1.9.1" data-path="05a-cpp11.html">
            
                <a href="05a-cpp11.html">
            
                    
                    What's new in C++11
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.9.2" data-path="05b-cpp14.html">
            
                <a href="05b-cpp14.html">
            
                    
                    What's new in C++14
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.9.3" data-path="05c-cpp17.html">
            
                <a href="05c-cpp17.html">
            
                    
                    What's new in C++17
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.9.4" data-path="05d-cppfuture.html">
            
                <a href="05d-cppfuture.html">
            
                    
                    Prospects in C++'s future
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.1.10" data-path="06a-perf.html">
            
                <a href="06a-perf.html">
            
                    
                    C++ performance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.11" data-path="06b-python.html">
            
                <a href="06b-python.html">
            
                    
                    Python in the upgrade era
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="5.1" >
            
                <a target="_blank" href="ref://developkit-lessons.pdf">
            
                    
                    Download PDF
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >What's new in C++11</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="new-features-in-c11-for-lhcb-physicists">New features in C++11 for LHCb Physicists</h1>
<p><div class="panel panel-warning"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(7079221315);" id="learning-objectives"><i class="fa fa-line-chart"></i> Learning Objectives<span id="heading-7079221315"></span></h3></div><div class="panel-body" id="panel-7079221315"><ul>
<li>&quot;Learn a few of the most useful tools in C++11.&quot;</li>
</ul>
</div></div></p>
<p>C++11 was the largest change ever made to C++; and due to the changed release schedule, probably will remain the largest single change. It is a well thought out, mostly backward-compatible change that can completely change the way you write code in C++. It is best thought of as almost a new language, a sort of (C++)++ language. There are too many changes to list here, and there are excellent resources available, so this is meant to just give you a taste of some of the most useful changes.</p>
<p>Many of the features work best together, or are related. There already are great resources for learning about C++11 (listed at the bottom of this lesson), and C++11 is already in use in current LHCb software. Therefore, the remainder of this lesson will cover a few of the common idioms in C++11 that a programmer experienced with the older C++ might not immediately think of.</p>
<h2 id="types">Types</h2>
<p>Typing in C++11 is much simpler. If the type is deductible, auto allows you to avoid writing it out. A few examples of uses of auto:</p>
<pre><code class="lang-cpp"><span class="hljs-comment">// Avoiding double writing on pointers</span>
<span class="hljs-keyword">auto</span> pointer = <span class="hljs-keyword">new</span> SomeNamespace::MyLongType(arg1, arg2);

<span class="hljs-comment">// Does anyone know the type of an iterator? It&apos;s ugly!</span>
<span class="hljs-keyword">auto</span> iterator = some_vector.begin();

<span class="hljs-comment">// This is useful for prototyping, but probably should be explictly typed in real code to help coders</span>
<span class="hljs-keyword">auto</span> type = function_returns_something();

<span class="hljs-comment">// Worst use of auto; don&apos;t do this</span>
<span class="hljs-keyword">auto</span> a = <span class="hljs-number">1</span>;
</code></pre>
<p>ROOT macros have a syntax that precedes auto; you can simply assign (<code>x = Something();</code>) and if <code>x</code> does not already exist, it does the equivalent of <code>auto x = Something();</code>. This has the drawback that it is not valid C++ code, but unfortunately is still useful in a RootBook, where you may want to rerun a cell.</p>
<p>The <code>NULL</code> keyword, which is equivalent to 0, causes typing issues. A new <code>nullptr</code> keyword was added, and is not equivalent to zero. This is significantly better type-safety, and should be used instead of <code>NULL</code>.</p>
<p>The definitions of <code>const</code> and <code>mutable</code> changed a little; <a href="https://channel9.msdn.com/posts/C-and-Beyond-2012-Herb-Sutter-You-dont-know-blank-and-blank" target="_blank">see this video</a>. In short: <code>const</code> actually means bit-wise constant or thread-safe; mutable means the object is already thread-safe (atomics, mutexs, some queues). This is probably what you thought they meant (but didn&apos;t) in C++98.</p>
<h2 id="containers-and-iterators">Containers and iterators</h2>
<p>While iterators existed in previous versions, using them is now part of the language, with the iterating for statement (for each). It allows a unintuitive iteration loop to be written more cleanly and compactly. Compare the following two methods of setting the values of a vector to zero:</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">for</span>(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">double</span>&gt;::iterator iter = <span class="hljs-built_in">vector</span>.begin(); iter != <span class="hljs-built_in">vector</span>.end(); ++iter)
    *value = <span class="hljs-number">0.0</span>;

<span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> &amp;value : <span class="hljs-built_in">vector</span>)
    value = <span class="hljs-number">0.0</span>;
</code></pre>
<p>To make something iterable, you should define a <code>begin</code> and <code>end</code> method or function. There are several options, as well. Adding an <code>&amp;</code> will give you a reference, to save memory copies and to allow mutation of the original iterable. Adding <code>const &amp;</code> avoids the copy but ensures that you don&apos;t change the original iterable.</p>
<p>A related improvement is the addition of container constructors. Which means you can <em>finally</em> do this:</p>
<pre><code class="lang-cpp"><span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; values = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>};
</code></pre>
<p>C++ also has a variety of different initializers; C++11 added a uniform initializer syntax, so it has even more different initializers. The benefit is that it works in cases that the old syntax had issues. It solves the <em>Most Vexing Parse</em>, where a new object cannot be followed by parenthesis, since that is a function definition. It also does not explicitly narrow.</p>
<p>Due to the addition of initialiser lists, though, this can be confusing. What does the following statement produce, a list of 42 integers, or one integer with the value 42?</p>
<pre><code class="lang-cpp"><span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-built_in">vector</span>{<span class="hljs-number">42</span>};
</code></pre>
<p><div class="panel panel-danger"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(1233264976);" id="answerclick-to-expand"><i class="fa fa-check-square-o"></i> Answer<span id="heading-1233264976">Click to expand</span></h3></div><div class="panel-body" style="display: none" id="panel-1233264976"><p>The standard oddly prioritizes the List Initializer, if the object in question supports List Initializer, and so this is one vector of the value 42. The only way to initialize 42 empty values is to use the old syntax, <code>std::vector&lt;int&gt; vector(42);</code>, making this Uniform Initializer Syntax definitely not Universal Initializer Syntax.</p>
<p>This might show up most often in member initializers, which were added to C++11 also; these have the same caveat.</p>
</div></div></p>
<ul>
<li><a href="../DevelopKit/code/NewCpp/cpp11/for.cpp">Example</a></li>
</ul>
<h2 id="functional-programming">Functional programming</h2>
<p>Functions are now easier to refer to and create. A <code>std::function</code> type is useful, but usually will be hidden with <code>auto</code> unless you are crafting a function to take functions as arguments. The lambda function allows an inline function definition, with some perks. The syntax is <code>[](){}</code>, which looks like a normal function definition with the function name and type replaced by the square brackets. For example:</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">auto</span> square = [](<span class="hljs-keyword">double</span> x){<span class="hljs-keyword">return</span> x*x;};
<span class="hljs-keyword">double</span> squared_five = square(<span class="hljs-number">5.0</span>);
</code></pre>
<p>The lambda function gets interesting when you add something to the square brackets; this is called &quot;capture&quot; and allows you to capture the surrounding variables. For example:</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>;
<span class="hljs-keyword">auto</span> counter = [&amp;i](){<span class="hljs-keyword">return</span> i++;};
counter(); <span class="hljs-comment">// returns 0</span>
counter(); <span class="hljs-comment">// returns 1</span>
</code></pre>
<p>You can capture by value, by reference, etc. If you use <code>[=]</code> or <code>[&amp;]</code>, the lambda function will automatically capture (by value or reference, respectively) any variables mentioned inside the function. Note that if you do use capture, you will lose the ability to convert to a old-style C function pointer.</p>
<ul>
<li><a href="../DevelopKit/code/NewCpp/cpp11/lambda.cpp">Example</a></li>
</ul>
<h2 id="class-improvements">Class improvements</h2>
<p>Default values for members can be declared in the definition now (as I&apos;m sure you&apos;ve tried to do in older C++ at least once). You can also call a previous constructor in the initializer list (delegating constructors).</p>
<h2 id="compile-time-improvements">Compile time improvements</h2>
<p>The slow removal of the ugly, error-prone macro programming has started in C++11, with <code>constexpr</code>. A function or class with this modifier (and lots of restrictions as to what it can contain) can be used by the compiler at compile time to produce a result in your compiled code.</p>
<p>The move operation was added, as well. This allows moving a value through a special <code>std::move</code>, and also can be invoked by the compiler automatically if you return a value from a function. This reduces the need to return pointers from functions.</p>
<h2 id="std-library-improvements">Std library improvements</h2>
<p>The powerful <code>std::shared_ptr</code> and <code>std::unique_ptr</code> remove most of the reasons to fear pointers, though they don&apos;t work that well with toolkits like ROOT that try to do their own memory management. A chrono library was added for consistent timekeeping on all platforms. A threading library provides tools that work with the new functional tools and makes threading easy, and also a mutex and atomic library to support it. A regular expression library was added. More algorithms were added. A sized integer library was <em>finally</em> added with <code>stdint.h</code> (a benefit of being based on C99).
Random number generation is finally properly supported, with a good set of algorithms and distributions.</p>
<p>Several container libraries were added. The most notable container library addition is the array library, which provides a compile time replacement for C-arrays, with bounds features. Unordered versions several containers were added.
Containers became much more powerful, now with move semantics, as well as <code>emplace_back</code>, which can construct a value directly inside a container. Most containers support initializer lists.</p>
<p>A functional library was added to give an explicit type to function pointers, and is used for lambdas as well. A bind function allows you to add function arguments to a function (currying in functional programming terms).</p>
<h2 id="variadic-templates">Variadic templates</h2>
<p>Variadic templates allow a function or constructor to take an unlimited number of arguments of any type. This allows the <code>std::tuple</code> feature, Gaudi&apos;s functional algorithms, and other very powerful features. Although the implementation may seem unusual at first, especially if you are used to a scripting language like Python, the implementation allows the parameter expansion to happen at compile time, meaning there is no runtime penalty for using variadic templates.</p>
<p>The syntax uses the following constructs:</p>
<ul>
<li><strong>Declaring a parameter pack.</strong> This is denoted by an ellipses to the <em>left</em> of a parameter name. The ellipses are usually placed next to the proceeding type, such as in <code>template&lt;typename... Ts&gt;</code> or <code>Ts... values</code>, but the meaning is the same. For a class this must be the last parameter; for a function it can occur earlier (but usually does not).</li>
<li><strong>Expanding a parameter pack.</strong> This is denoted by an ellipses to the <em>right</em> of a parameter pack or expression containing a parameter pack. This is often seen in the body of the functions. These are commonly used to call functions, <code>funct(values...)</code>, or perform an expression then call a function <code>funct(do_something(values)...)</code>. In the second example, <code>do_something</code> is called on each value before calling the <code>funct</code> function.</li>
<li><strong>Counting the parameters in the parameter pack.</strong> This is done with the <code>sizeof...()</code> function, which is a <code>constexpr</code> function that returns the number of parameters inside the parameter pack.</li>
</ul>
<p><div class="panel panel-success"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(5495415425);" id="variadic-template-function-exampleclick-to-expand"><i class="fa fa-bell"></i> Variadic template function example<span id="heading-5495415425">Click to expand</span></h3></div><div class="panel-body" style="display: none" id="panel-5495415425"><p>An example of a Python style print function:</p>
<pre><code class="lang-cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">print</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
}
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T, <span class="hljs-keyword">typename</span>... Ts&gt;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">print</span><span class="hljs-params">(T value, Ts... values)</span> </span>{
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; value &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;
    print(values...);
}
</code></pre>
<p>Here, the ellipses serves the same role the first two times it is seen; it is declaring a parameter pack <code>values</code> with type <code>Ts</code>. Inside the function, the ellipses is expanding the call to <code>print(first value, second value, etc)</code>. This recursively calls itself, ending in the final empty argument form; a very common pattern for variadic templates.</p>
</div></div></p>
<p><div class="panel panel-primary"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(752215774);" id="note"><i class="fa fa-info-circle"></i> Note<span id="heading-752215774"></span></h3></div><div class="panel-body" id="panel-752215774"><p>There is an old feature called variadic functions from C, which allows an unlimited number of arguments, but is not type safe. This is how the unlimited argument <code>printf</code> function is defined. This uses an ellipsis at the end of the parameter list, optionally after a comma.</p>
</div></div></p>
<p>For more on variadic templates and what they can do, see <a href="http://en.cppreference.com/w/cpp/language/parameter_pack" target="_blank">Cpp Reference&apos;s page on paramter packs</a>.</p>
<h2 id="move-semantics">Move semantics</h2>
<p>One of the more fundamental changes in the language was the promotion of move semantics to a language feature, as well as stronger guidelines on auto-optimization. This can fundamentally change the way functions are written. What is the problem with this statement in C++03?</p>
<pre><code class="lang-cpp">GiantObject item = GiantObject_returning_function();
</code></pre>
<p>Here, you create a <code>GiantObject</code> inside the function, and then copy it to a new object <code>item</code>, then delete the old object. It&apos;s horribly wasteful in both time and memory; if you don&apos;t have enough memory for two separate copies of <code>GiantObject</code>, you can crash your program. In C++11, not only is the idea of a move instead of a copy added, the compiler is generally recommended to do that for you if it can. So the value will simply be moved, with no changes to either the function or the
line above, as long as there are no references retained to the object inside the function (though globals, members, parameters, etc). This is a compiler recommendation, rather than a formal requirement of the language, but most compilers implement it. (In C++17, it becomes an official requirement of the language in most cases.) This is part of C++11&apos;s move away from the use of pointers, and is huge step in the right direction.</p>
<p>Moving is also a part of the language, but using it explicitly requires some understanding of a fundamental feature of C++ that was not usually talked about before: value categories.</p>
<h3 id="explanation-of-value-categories">Explanation of value categories</h3>
<p>The names rvalues and lvalues historically refer to where the expression tends to be relative to an assignment operation. So for the expression:</p>
<pre><code class="lang-cpp">x = <span class="hljs-number">1</span>+<span class="hljs-number">2</span>;
</code></pre>
<p>The <code>x</code> is an lvalue, and the 1+2 is an rvalue. The names can be slighltly misleading, since an l-value could occur on either side of the assignment, and there is no requirement that an assignment be made in every line of C, but every expression (or sub-expression) can be classified under these two categories in C++03. The difference is in memory; the L-value is given a real location in memory, while the rvalue is temporary and cannot be used past the current expression (and the compiler
might optimize it away in some cases). An example of an expression that is an rvalue is <code>*(x+1)</code>, where x is a pointer. It is quite possible for a function to return an lvalue.</p>
<p>In C++11, rvalues are further complicated because of the desire to move object. To properly grasp the syntax, it is important to understand all 3 unique categories in C++11, from the C++ standard <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3055.pdf" target="_blank">n3055</a>:</p>
<ul>
<li><strong>lvalue</strong>: Anything that can be on the left side of equal sign.</li>
<li><strong>xvalue</strong>: An rvalue that about to expire (something being returned from a function, for example). An xvalue can be moved.</li>
<li><strong>prvalue</strong>: An rvalue that is not about to expire, like a literal (<code>12</code>, <code>true</code>) or the result of a non-reference return of a function.</li>
</ul>
<p>C++11 also defines two combination categories, <strong>glvalue</strong> is an lvalue or xvalue, and the classic <strong>rvalue</strong>, which is a prvalue or an xvalue.</p>
<h3 id="syntax-for-the-value-categories">Syntax for the value categories</h3>
<p>Functions can return any of the three C++11 categories:</p>
<pre><code class="lang-cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">returns_prvalue</span><span class="hljs-params">()</span></span>;
<span class="hljs-function"><span class="hljs-keyword">int</span>&amp; <span class="hljs-title">returns_lvalue</span><span class="hljs-params">()</span></span>;
<span class="hljs-function"><span class="hljs-keyword">int</span>&amp;&amp; <span class="hljs-title">returns_xvalue</span><span class="hljs-params">()</span></span>;
</code></pre>
<p>And, functions can take either of the values:</p>
<pre><code class="lang-cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-keyword">int</span> any_value)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-keyword">int</span>&amp; lvalue)</span></span>;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">foo</span><span class="hljs-params">(<span class="hljs-keyword">int</span>&amp;&amp; rvalue)</span></span>; <span class="hljs-comment">// rvalue takes an rvalue, but inside the function it is a named lvalue</span>
</code></pre>
<p>This hopefully gives you an idea of what a move function must look like. Its signature must be:</p>
<pre><code class="lang-cpp"><span class="hljs-function">T&amp;&amp; <span class="hljs-title">move</span><span class="hljs-params">(T&amp;&amp; input_rvalue)</span></span>;
</code></pre>
<p>Here, it takes an rvalue and returns an xvalue. It is the same thing as doing a static cast to an rvalue. This xvalue is therefore movable by the compiler. </p>
<p><div class="panel panel-success"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(1404047458);" id="example-of-explicit-moveclick-to-expand"><i class="fa fa-bell"></i> Example of explicit move<span id="heading-1404047458">Click to expand</span></h3></div><div class="panel-body" style="display: none" id="panel-1404047458"><pre><code class="lang-cpp"><span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> a = <span class="hljs-string">&quot;original&quot;</span>;
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> b = <span class="hljs-string">&quot;new&quot;</span>;
b = <span class="hljs-built_in">std</span>::move(a); <span class="hljs-comment">// a now empty</span>
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">&quot;[&quot;</span> &lt;&lt; a &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; b &lt;&lt; <span class="hljs-string">&quot;]&quot;</span>;
<span class="hljs-comment">// Will output: [ orignal]</span>
</code></pre>
</div></div></p>
<p>The most common uses tend to be in overloads, such as for move constructors, to specialize behavior for moves.</p>
<h2 id="other-features">Other features</h2>
<p>Tuples allow multiple return values, albeit through <code>std::tie</code>. In C++17 they are elevated to a more fundamental part of the language through new syntax.</p>
<p>C++ now supports user defined literals, for strings and for numbers. These were not included in the standard library for common types until C++14, though. One use was added, though; raw string literals <code>R&quot;...&quot;</code> were added, with similar meaning and semantics to the Python raw strings, were intended for the same use (regular expressions).</p>
<p>Attributes were added, allowing arbitrary tags to be added to expressions. There are very few official ones, though some get added for each version. These are intended mostly for compiler specific functions, like OpenMP. They are indicated by double square brackets.</p>
<p>The parser is smarter, finally understanding <code>&lt;one, &lt;two&gt;&gt;</code> correctly without forcing a space between the greater-thans.</p>
<p>Suffix return type allows the return type to be listed after the function definition line, instead of before; this allows templated functions with complex return types to be written more easily, since the parameters exist after the definition line, but not before.</p>
<p>The override keyword indicates a function is intended to override a virtual function, making the intention clear (and compiler can check and issue errors). The final keyword is also added, enforcing a virtual function to be non-overridable.</p>
<p><div class="panel panel-success"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(5691593324);" id="further-reading"><i class="fa fa-key"></i> Further reading<span id="heading-5691593324"></span></h3></div><div class="panel-body" id="panel-5691593324"><p>There are many, many smaller features, as well as details of the larger features that were not covered here. See:</p>
<ul>
<li><a href="http://www.stroustrup.com/C++11FAQ.html" target="_blank">Bjarne Stroustrup&apos;s document</a> - written by the creator of C++.</li>
<li><a href="http://blog.smartbear.com/c-plus-plus/the-biggest-changes-in-c11-and-why-you-should-care/" target="_blank">SmartBear blog post</a></li>
<li><a href="https://isocpp.org/wiki/faq/cpp11" target="_blank">ISO CPP</a></li>
<li><a href="http://en.cppreference.com/w/" target="_blank">Cpp Reference</a></li>
</ul>
</div></div></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="05-cpp.html" class="navigation navigation-prev " aria-label="Previous page: What's new in C++">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="05b-cpp14.html" class="navigation navigation-next " aria-label="Next page: What's new in C++14">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"What's new in C++11","level":"4.1.9.1","depth":3,"next":{"title":"What's new in C++14","level":"4.1.9.2","depth":3,"path":"first-development-steps/05b-cpp14.md","ref":"first-development-steps/05b-cpp14.md","articles":[]},"previous":{"title":"What's new in C++","level":"4.1.9","depth":2,"path":"first-development-steps/05-cpp.md","ref":"first-development-steps/05-cpp.md","articles":[{"title":"What's new in C++11","level":"4.1.9.1","depth":3,"path":"first-development-steps/05a-cpp11.md","ref":"first-development-steps/05a-cpp11.md","articles":[]},{"title":"What's new in C++14","level":"4.1.9.2","depth":3,"path":"first-development-steps/05b-cpp14.md","ref":"first-development-steps/05b-cpp14.md","articles":[]},{"title":"What's new in C++17","level":"4.1.9.3","depth":3,"path":"first-development-steps/05c-cpp17.md","ref":"first-development-steps/05c-cpp17.md","articles":[]},{"title":"Prospects in C++'s future","level":"4.1.9.4","depth":3,"path":"first-development-steps/05d-cppfuture.md","ref":"first-development-steps/05d-cppfuture.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["-sharing","panels@git+https://github.com/lhcb/gitbook-plugin-panels.git#master","katex-auto-render@git+https://github.com/lhcb/gitbook-plugin-katex-auto-render.git#master","collapsible-menu","otherlink","term"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"collapsible-menu":{},"search":{},"otherlink":{},"term":{"copyButtons":true,"fade":true,"lineStyles":true,"prompt":"(?<prompt>[^\\$^#^:]*)(?<pathsep>:?)(?<path>[^\\$^#]*?)(?<delimiter>[\\$#] )(?<command>.*)$","style":"default"},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"panels":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"katex-auto-render":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"The Starterkit team and contributors","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"first-development-steps/05a-cpp11.md","mtime":"2017-11-10T03:51:27.772Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2017-11-10T03:54:01.325Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-panels/panels.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-katex-auto-render/katex.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-katex-auto-render/auto-render.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-katex-auto-render/enable-auto-render.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-otherlink/js/otherlink.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-term/clipboard.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-term/initclip.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-term/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

